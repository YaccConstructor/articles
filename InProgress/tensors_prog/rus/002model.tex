% !TeX encoding = windows-1251
% !TeX spellcheck = ru_RU
% !TEX root = mainrus.tex


В данном разделе изложена модель пользовательского интерфейса, которая учитывает все важные особенности предметной области.
Для реального использования модель должна быть немного расширена, но это не представляет сложности, так как расширения эти не вносят серьёзных изменений в алгоритм синтеза.

Можно выделить три понятия, связанных с интерфейсами пользователя: \emph{структура}, \emph{расположение} (англ. layout) и набор правил проектирования интерфейсов (англ. guideline), который для краткости далее будем называть \emph{предписанием}.
\emph{Структура} описывает набор элементов управления и связи между ними, \emph{расположение} уточняет их визуальные позиции друг к другу. Такое разделение согласуется с распространенной практикой отделения бизнес-логики от визуального представления~\cite{UI3}. Наконец, предписание отображает определенные структуры в конкретные примитивы расположения.

Продемонстрируем эти понятия на примере. Рассмотрим интерфейс с рис.~\ref{form1} и опишем структуру следующим образом.

\begin{itemize}
	\item Элементы управления GUI трёх видов: галочка (англ. check box), метка и поле со списком (англ. combo box).
	\item Присутствует зависимость между меткой и полем, так как первое \emph{описывает} второе; следовательно, их можно объединить в одну сущность.
	\item Существует зависимость порядка между галочкой и только что введенной композитной сущностью; по-видимому, дизайнер интерфейса таким образом выражает важность элементов управления.
\end{itemize}

Пример структуры схематично изображён на рис.~\ref{form1-structure}. Теперь её можно рассматривать как набор именованных \emph{отношений} между элементами управления, или даже над данными в них (строками, числами и т.п.).
Подход разделяет все отношения на две категории: \emph{абстрактные} и \emph{конкретные}.
Семантика абстрактных определяется предписанием, конкретных~--- нашей системой.
Конкретные описывают типы элементов управления, различные их свойства (содержимое текстовых полей, размеры, и т.п.), а также позволяют объединять элементы управления в упорядоченные или неупорядоченные группы, или в \emph{виртуальные}   элементы управления, объединяющие несколько в один целый.

Множество \emph{абстрактных} отношений включает: бинарное упорядочивание (один-за-другим), описание (один описывает другой, например, метка поле ввода или галочку), подчиненность (галочка делает активным/неактивным поле ввода). В реализации эти отношения~---  просто удобные имена, используемые в структуре и предписании. Их семантика полностью определяется предписанием, а система никаким особым образом не обрабатывает эти отношения. Пользователи могут добавлять новые абстрактные отношения и определять их семантику в предписании для своих нужд.

Для конкретной структуры её \emph{расположение} (англ. layout) определяется набором примитивов расположения, выравниванием и другими подобными свойствами. В примере метка и поле со списком располагаются горизонтально с некоторым отступом, галочка располагается сверху от введённого виртуального элемента для пары метка-поле с другим отступом, и всё расположение выровнено влево, что изображено на рис.~\ref{form1-layout}. В отличие от отношений, использованных при описании структуры, все примитивы расположения имеют фиксированную семантику, на которой основан процесс синтеза.

Наконец, предписание состоит из набора правил, описывающих какие примитивы расположения должны использоваться для соответствующих частей структуры и при каких условиях. На рис.~\ref{gdrule} можно увидеть пример такого правила, взятого из предписания~\cite{JBG} проектирования интерфейсов компании \textsc{JetBrains}.
Обычно, эти правила описываются неформально на примерах, в следующем разделе они будут формализованы.